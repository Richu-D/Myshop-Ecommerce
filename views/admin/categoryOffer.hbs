
{{>admin_header}}
{{!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js" integrity="sha512-CryKbMe7sjSCDPl18jtJI5DR5jtkUWxPXWaLCst6QjH8wxDexfRJic2WRmRXmstr2Y8SxDDWuBO6CQC6IE4KTA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> --}}

<form action="addCategoryOffer" method="post" class="col-md-8">
                        <label for="category">Category Name</label>
                        <select name="categoryName" class="form-control" id="category">
                            <option value="">Select Category</option>
                            {{#each categoryList}}
                            <option value="{{this.category}}">{{this.category}}</option>
                            {{/each}}
                        </select>                                             
                        <label for="offer">Offer %</label>
                        <input type="number" name="offer" id="offer" class="form-control">
                        <label for="offerStarts">Offer Starts</label>
                        <input type="date" id="offerStarts" name="offerStarts">
                        <label for="offerExpire">Offer Expire</label>
                        <input type="date" id="offerExpire" name="offerExpire">                       
                        <input type="submit" class="btn btn-success" value="Submit"> 
</form>

<table class="table table-light table-borderless table-hover text-center mb-0">
                    <thead class="thead-dark">
                        <tr>
                            <th>No.</th>
                            <th>Category Name</th>
                            <th>offer %</th>                           
                            <th>Offer Starts</th>
                            <th>Offer Ends</th>
                            <th>Status</th>                            
                            <th>Delete</th>                            
                        </tr>
                    </thead>
                    <tbody class="align-middle">
                         
                        {{#each categorys}}
                        
                        <tr>
                            <td>{{order @index}}</td>                        
                            <td>{{this.category}}</td>                       
                            <td>{{this.offer}}</td>
                            <td>{{this.offerStarts}}</td>
                            <td>{{this.offerExpire}}</td>
                            <td>{{#if this.status}}Active{{else}}Not Active{{/if}}</td>

                            <td>
                            <button type="button" class="btn btn-danger"
                                onclick="deleteCategoryOffer('{{this.category}}')">Delete</button>
                            </td>                                              
                        </tr>
                        
                        {{/each}}
                    </tbody>
                </table>

{{!-- Sweet Alert --}}
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
                <script>
                    function deleteCategoryOffer(categoryName){
                     //  categoryId,categoryName
                      swal({
            title: "",
            text: `Are you sure to delete This "${categoryName}" Category Offer Permenently ?`,
            icon: "warning",
            buttons: true,
            dangerMode: true,
        }).then((willDelete) => {
            if (willDelete) {

                $.ajax({
                    url: `deleteCategoryOffer/${categoryName}`,
                    method: 'get'
                })

                swal("", "Category Offer Deleted", "success").then(() => {
                    location.reload()
                })
            }
        })
}
                </script>
             
{{>admin_footer}}